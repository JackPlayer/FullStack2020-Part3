{"version":3,"sources":["services/personsService.js","components/Filter.js","components/PersonForm.js","components/Persons.js","components/Message.js","index.js"],"names":["axios","get","then","response","data","newEntry","post","id","updatedEntry","put","delete","Filter","filter","onChange","value","PersonForm","onSubmit","onChangeName","onChangeNumber","newName","newNumber","type","Persons","persons","onClick","person","name","includes","map","key","className","style","display","flexDirection","alignItems","marginTop","number","person_id","marginLeft","fontSize","height","Message","message","timeout","errorMessageController","color","messageStyle","border","padding","margin","setTimeout","App","useState","setPersons","updateMessage","setUpdateMessage","setNewName","setNewNumber","setFilter","useEffect","personsService","personsData","e","target","preventDefault","alreadyExists","forEach","window","confirm","changedPerson","updatedPerson","p","catch","err","newPerson","date","Date","concat","alert","getAttribute","find","parseInt","res","newPersons","ReactDOM","render","document","getElementById"],"mappings":"0OAuBe,EApBA,WAEX,OADiBA,IAAMC,IAFV,gBAGGC,MAAK,SAACC,GAAD,OAAcA,EAASC,SAkBjC,EAfA,SAACC,GAEZ,OADiBL,IAAMM,KAPV,eAOyBD,GACtBH,MAAK,SAACC,GAAD,OAAcA,EAASC,SAajC,EAVA,SAACG,EAAIC,GAEhB,OADiBR,IAAMS,IAAN,UAZJ,eAYI,YAAyBF,GAAMC,GAChCN,MAAK,SAACC,GAAD,OAAcA,EAASC,SAQjC,EALA,SAACG,GAEZ,OADiBP,IAAMU,OAAN,UAjBJ,eAiBI,YAA4BH,IAC7BL,MAAK,SAACC,GAAD,OAAcA,EAASC,SCRjCO,EATA,SAAC,GAAwB,IAAvBC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,SAErB,OACI,wCACY,2BAAOC,MAAOF,EAAQC,SAAUA,MCarCE,EAlBI,SAAC,GAAkE,IAAjEC,EAAgE,EAAhEA,SAAUC,EAAsD,EAAtDA,aAAcC,EAAwC,EAAxCA,eAAgBC,EAAwB,EAAxBA,QAASC,EAAe,EAAfA,UAElE,OACA,0BAAMJ,SAAUA,GACZ,sCACQ,2BAAOF,MAAOK,EAASN,SAAUI,KAEzC,wCACU,2BAAOH,MAAOM,EAAWP,SAAUK,KAE7C,6BACE,4BAAQG,KAAK,UAAb,UCSKC,EApBC,SAAC,GAAgC,IAA/BC,EAA8B,EAA9BA,QAASX,EAAqB,EAArBA,OAAQY,EAAa,EAAbA,QAE/B,OACI,4BAGID,EAAQX,QAAO,SAACa,GAAD,OAAYA,EAAOC,KAAKC,SAASf,MAASgB,KAAI,SAACH,GAC1D,OACI,yBAAKI,IAAKJ,EAAOlB,GAAIuB,UAAU,SAASC,MAAO,CAACC,QAAS,OAAQC,cAAe,MAAOC,WAAY,SAAUC,UAAW,SACpH,2BAAIV,EAAOC,KAAX,IAAkBD,EAAOW,QACzB,4BAAQZ,QAASA,EAASa,UAAWZ,EAAOlB,GAAIwB,MAAO,CAACO,WAAY,OAAQC,SAAU,SAAUC,OAAQ,QAAxG,gBCaTC,EAvBC,SAAC,GAAgD,IAA/CC,EAA8C,EAA9CA,QAASC,EAAqC,EAArCA,QAASC,EAA4B,EAA5BA,uBAChC,GAAwB,KAApBF,EAAQA,QAAgB,OAAO,KAEnC,IAAMG,EAA0B,WAAjBH,EAAQrB,KAAqB,QAAS,UAE/CyB,EAAe,CACjBN,OAAQ,KACRK,QACAE,OAAO,aAAD,OAAeF,GACrBG,QAAS,SACTC,OAAQ,OACRjB,QAAS,SAKb,OAFAkB,YAAY,kBAAMN,MAA2BD,GAGzC,yBAAKpC,GAAG,UAAUwB,MAAOe,GACrB,2BAAIJ,EAAQA,WCRlBS,G,MAAM,WAAO,IAAD,EACgBC,mBAAS,IADzB,mBACR7B,EADQ,KACC8B,EADD,OAE2BD,mBAAS,CAACV,QAAS,GAAIrB,KAAM,WAFxD,mBAERiC,EAFQ,KAEOC,EAFP,OAGgBH,mBAAS,IAHzB,mBAGRjC,EAHQ,KAGCqC,EAHD,OAIoBJ,mBAAS,IAJ7B,mBAIRhC,EAJQ,KAIGqC,EAJH,OAKcL,mBAAS,IALvB,mBAKRxC,EALQ,KAKA8C,EALA,KAOhBC,qBAAU,WACRC,IAEG1D,MAAK,SAAC2D,GACLR,EAAWQ,QAEd,IA+EH,OACE,6BACE,yCACA,kBAAC,EAAD,CAASnB,QAASY,EAAeV,uBAAwB,kBAAMW,EAAiB,2BAAID,GAAL,IAAoBZ,QAAS,OAAMC,QAAS,MAC3H,kBAAC,EAAD,CAAQ/B,OAAQA,EAAQC,SAAU,SAACiD,GAAD,OAAOJ,EAAUI,EAAEC,OAAOjD,UAE5D,uCACA,kBAAC,EAAD,CAAYE,SApFO,SAAC8C,GAGtB,GAFAA,EAAEE,iBAEc,KAAZ7C,GAAgC,KAAdC,EAAtB,CAKA,IAAI6C,GAAgB,EA+BpB,GA7BA1C,EAAQ2C,SAAQ,SAACzC,GAGf,GAAIA,EAAOC,OAASP,IAClB8C,GAAgB,EAIdE,OAAOC,QAAP,UAAkB3C,EAAOC,KAAzB,kFACA,CAEA,IAAM2C,EAAa,2BAAO5C,GAAP,IAAeW,OAAQhB,IAG1CwC,EAAsBnC,EAAOlB,GAAI8D,GAClBnE,MAAK,SAACoE,GAELjB,EAAW9B,EAAQK,KAAI,SAAC2C,GAAD,OAAOA,EAAEhE,KAAO+D,EAAc/D,GAAKgE,EAAID,MAC9Db,EAAa,IACbD,EAAW,IACXD,EAAiB,CAACb,QAAQ,GAAD,OAAK4B,EAAc5C,KAAnB,wCAAuD4C,EAAclC,QAAUf,KAAM,cAE/GmD,OAAM,SAACC,GACNlB,EAAiB,CAACb,QAAQ,UAAD,OAAYjB,EAAOC,KAAnB,+BAAsDL,KAAM,kBAMvG4C,EAAJ,CAEA,IAAMS,EAAY,CAChBhD,KAAMP,EACNiB,OAAQhB,EACRuD,KAAM,IAAIC,MAGZhB,EACUc,GACPxE,MAAK,SAACG,GACLgD,EAAW9B,EAAQsD,OAAOxE,IAC1BkD,EAAiB,CAACb,QAAQ,GAAD,OAAKgC,EAAUhD,KAAf,mBAAsCL,KAAM,WACrEoC,EAAa,IACbD,EAAW,aAjDbW,OAAOW,MAAM,wCAgFyB7D,aAAc,SAAC6C,GAAD,OAAON,EAAWM,EAAEC,OAAOjD,QAAQI,eAAgB,SAAC4C,GAAD,OAAOL,EAAaK,EAAEC,OAAOjD,QAAQK,QAASA,EAASC,UAAWA,IAEzK,uCACA,kBAAC,EAAD,CAASI,QA5BQ,SAACsC,GACpB,IAAMvD,EAAKuD,EAAEC,OAAOgB,aAAa,aAG/BZ,OAAOC,QAAP,iBAAyB7C,EAAQyD,MAAK,SAACvD,GAAD,OAAYA,EAAOlB,KAAO0E,SAAS1E,MAAKmB,KAA9E,OAEAkC,EAAsBrD,GACPL,MAAK,SAACgF,GACL,IAAMC,EAAa5D,EAAQX,QAAO,SAACa,GAAD,OAAYA,EAAOlB,KAAO0E,SAAS1E,MACrE8C,EAAW8B,MAEZX,OAAM,SAACC,GACNlB,EAAiB,CAACb,QAAQ,kCAAD,OAAoCnC,GAAMc,KAAM,cAgBzDE,QAASA,EAASX,OAAQA,OAMhEwE,IAASC,OAAO,kBAAC,EAAD,MAASC,SAASC,eAAe,SAClCpC,c","file":"static/js/main.c5d30344.chunk.js","sourcesContent":["import axios from 'axios'\r\n\r\nconst endpoint = \"/api/persons\"\r\nconst getAll = () => {\r\n    const response = axios.get(endpoint)\r\n    return response.then((response) => response.data )\r\n}\r\n\r\nconst create = (newEntry) => {\r\n    const response = axios.post(endpoint, newEntry)\r\n    return response.then((response) => response.data)\r\n}\r\n\r\nconst update = (id, updatedEntry) => {\r\n    const response = axios.put(`${endpoint}/${id}`, updatedEntry)\r\n    return response.then((response) => response.data)\r\n}\r\n\r\nconst remove = (id) => {\r\n    const response = axios.delete(`${endpoint}/${id}`)\r\n    return response.then((response) => response.data)\r\n}\r\n\r\nexport default {getAll, create, update, remove}","import React from 'react'\r\n\r\n\r\nconst Filter = ({filter, onChange}) => {\r\n\r\n    return (\r\n        <div>\r\n            Filter: <input value={filter} onChange={onChange}/>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Filter","import React from 'react'\r\n\r\nconst PersonForm = ({onSubmit, onChangeName, onChangeNumber, newName, newNumber}) => {\r\n\r\n    return (\r\n    <form onSubmit={onSubmit}>\r\n        <div>\r\n          Name: <input value={newName} onChange={onChangeName}/>\r\n        </div>\r\n        <div>\r\n          Number: <input value={newNumber} onChange={onChangeNumber}/>\r\n        </div>\r\n        <div>\r\n          <button type=\"submit\">add</button>\r\n        </div>\r\n      </form>\r\n    )\r\n}\r\n\r\n\r\nexport default PersonForm","import React from 'react'\r\n\r\nconst Persons = ({persons, filter, onClick}) => {\r\n\r\n    return (\r\n        <ul>\r\n            {\r\n            // Filter out names that don't match the filter. Map to list item\r\n            persons.filter((person) => person.name.includes(filter)).map((person) => {\r\n                return (\r\n                    <div key={person.id} className=\"person\" style={{display: 'flex', flexDirection: 'row', alignItems: \"center\", marginTop: \"10px\"}}>\r\n                        <p>{person.name} {person.number}</p>\r\n                        <button onClick={onClick} person_id={person.id} style={{marginLeft: \"10px\", fontSize: \"0.7rem\", height: \"50%\"}}>Delete</button>\r\n                    </div>\r\n                    \r\n                )\r\n            })\r\n            }\r\n      </ul> \r\n    )\r\n}\r\n\r\nexport default Persons","import React from 'react'\r\n\r\nconst Message = ({message, timeout, errorMessageController}) => {\r\n    if (message.message === '') return null\r\n    \r\n    const color = (message.type === 'normal') ? 'green': 'darkred' \r\n    \r\n    const messageStyle = {\r\n        height: \"2%\",\r\n        color,\r\n        border: `3px solid ${color}`,\r\n        padding: \"0.5rem\",\r\n        margin: \"10px\",\r\n        display: \"block\"\r\n    }\r\n\r\n    setTimeout((() => errorMessageController()), timeout)\r\n\r\n    return (\r\n        <div id=\"message\" style={messageStyle}>\r\n            <p>{message.message}</p>    \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Message","import React, { useState, useEffect } from 'react'\nimport ReactDOM from 'react-dom'\n\nimport personsService from './services/personsService'\n\nimport Filter from './components/Filter'\nimport PersonForm from './components/PersonForm'\nimport Persons from './components/Persons'\nimport Message from './components/Message'\n\nimport './style.css'\n\nconst App = () => {\n  const [ persons, setPersons ] = useState([])\n  const [ updateMessage, setUpdateMessage] = useState({message: \"\", type: \"normal\"}) \n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ filter, setFilter]  = useState('')\n\n  useEffect(() => {\n    personsService\n      .getAll()\n      .then((personsData) => {\n        setPersons(personsData)\n      })\n  }, [])\n\n  const handleAddEntry = (e) => {\n    e.preventDefault();\n    \n    if (newName === '' || newNumber === '') {\n      window.alert('One or both of the fields are blank')\n      return\n    }\n\n    let alreadyExists = false\n    // Loop through persons\n    persons.forEach((person) => {\n\n      // Name already exists in the database\n      if (person.name === newName) {\n        alreadyExists = true\n\n        // Ask to confirm if the number should be updated\n        if (\n          window.confirm(`${person.name} is already added to the phonebook. Replace the old number with the new one?`)\n        ) {\n\n          const changedPerson = {...person, number: newNumber}\n\n          // Update the number entry in the database\n          personsService.update(person.id, changedPerson)\n                        .then((updatedPerson) => {\n                          // Update the persons list and re-render\n                          setPersons(persons.map((p) => p.id !== updatedPerson.id ? p : updatedPerson))\n                          setNewNumber('')\n                          setNewName('')\n                          setUpdateMessage({message: `${updatedPerson.name} has updated their number to ${updatedPerson.number}`, type: 'normal'})\n                        })\n                        .catch((err) => {\n                          setUpdateMessage({message: `Error: ${person.name} entry could not be updated`, type: \"error\"})\n                        })\n        }\n      }\n    })\n\n    if (alreadyExists) return \n\n    const newPerson = {\n      name: newName,\n      number: newNumber,\n      date: new Date()\n    }\n    \n    personsService\n      .create(newPerson)\n      .then((newEntry) => {\n        setPersons(persons.concat(newEntry))\n        setUpdateMessage({message: `${newPerson.name} has been added`, type: 'normal'})\n        setNewNumber('')\n        setNewName('')\n      })\n    \n  }\n\n\n  const handleDelete = (e) => {\n    const id = e.target.getAttribute('person_id')\n\n    if (\n      window.confirm(`Delete ${persons.find((person) => person.id === parseInt(id)).name}?`)\n    ) {\n      personsService.remove(id)\n                    .then((res) => {\n                      const newPersons = persons.filter((person) => person.id !== parseInt(id))\n                      setPersons(newPersons)\n                    })\n                    .catch((err) => {\n                      setUpdateMessage({message: `Error deleting person with ID: ${id}`, type: \"error\"})\n                    })\n    }\n    \n  }\n\n  return (\n    <div>\n      <h1>Phonebook</h1>\n      <Message message={updateMessage} errorMessageController={() => setUpdateMessage({...updateMessage, message: ''})} timeout={3000}/>\n      <Filter filter={filter} onChange={(e) => setFilter(e.target.value)} />\n\n      <h2>Add New</h2>\n      <PersonForm onSubmit={handleAddEntry} onChangeName={(e) => setNewName(e.target.value)} onChangeNumber={(e) => setNewNumber(e.target.value)} newName={newName} newNumber={newNumber}/>\n\n      <h2>Numbers</h2>\n      <Persons onClick={handleDelete} persons={persons} filter={filter} />\n      \n    </div>\n  )\n}\n\nReactDOM.render(<App />, document.getElementById('root'))\nexport default App"],"sourceRoot":""}