(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{15:function(e,n,t){e.exports=t(38)},37:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var a=t(4),r=t(2),o=t(0),c=t.n(o),u=t(14),i=t.n(u),l=t(3),m=t.n(l),s=function(){return m.a.get("/api/persons").then((function(e){return e.data}))},f=function(e){return m.a.post("/api/persons",e).then((function(e){return e.data}))},d=function(e,n){return m.a.put("".concat("/api/persons","/").concat(e),n).then((function(e){return e.data}))},p=function(e){return m.a.delete("".concat("/api/persons","/").concat(e)).then((function(e){return e.data}))},b=function(e){var n=e.filter,t=e.onChange;return c.a.createElement("div",null,"Filter: ",c.a.createElement("input",{value:n,onChange:t}))},h=function(e){var n=e.onSubmit,t=e.onChangeName,a=e.onChangeNumber,r=e.newName,o=e.newNumber;return c.a.createElement("form",{onSubmit:n},c.a.createElement("div",null,"Name: ",c.a.createElement("input",{value:r,onChange:t})),c.a.createElement("div",null,"Number: ",c.a.createElement("input",{value:o,onChange:a})),c.a.createElement("div",null,c.a.createElement("button",{type:"submit"},"add")))},g=function(e){var n=e.persons,t=e.filter,a=e.onClick;return c.a.createElement("ul",null,n.filter((function(e){return e.name.includes(t)})).map((function(e){return c.a.createElement("div",{key:e.id,className:"person",style:{display:"flex",flexDirection:"row",alignItems:"center",marginTop:"10px"}},c.a.createElement("p",null,e.name," ",e.number),c.a.createElement("button",{onClick:a,person_id:e.id,style:{marginLeft:"10px",fontSize:"0.7rem",height:"50%"}},"Delete"))})))},E=function(e){var n=e.message,t=e.timeout,a=e.errorMessageController;if(""===n.message)return null;var r="normal"===n.type?"green":"darkred",o={height:"2%",color:r,border:"3px solid ".concat(r),padding:"0.5rem",margin:"10px",display:"block"};return setTimeout((function(){return a()}),t),c.a.createElement("div",{id:"message",style:o},c.a.createElement("p",null,n.message))},v=(t(37),function(){var e=Object(o.useState)([]),n=Object(r.a)(e,2),t=n[0],u=n[1],i=Object(o.useState)({message:"",type:"normal"}),l=Object(r.a)(i,2),m=l[0],v=l[1],w=Object(o.useState)(""),y=Object(r.a)(w,2),O=y[0],j=y[1],C=Object(o.useState)(""),k=Object(r.a)(C,2),N=k[0],S=k[1],x=Object(o.useState)(""),D=Object(r.a)(x,2),I=D[0],A=D[1];Object(o.useEffect)((function(){s().then((function(e){u(e)}))}),[]);return c.a.createElement("div",null,c.a.createElement("h1",null,"Phonebook"),c.a.createElement(E,{message:m,errorMessageController:function(){return v(Object(a.a)(Object(a.a)({},m),{},{message:""}))},timeout:3e3}),c.a.createElement(b,{filter:I,onChange:function(e){return A(e.target.value)}}),c.a.createElement("h2",null,"Add New"),c.a.createElement(h,{onSubmit:function(e){if(e.preventDefault(),""!==O&&""!==N){var n=!1;if(t.forEach((function(e){if(e.name===O&&(n=!0,window.confirm("".concat(e.name," is already added to the phonebook. Replace the old number with the new one?")))){var r=Object(a.a)(Object(a.a)({},e),{},{number:N});d(e.id,r).then((function(e){u(t.map((function(n){return n.id!==e.id?n:e}))),S(""),j(""),v({message:"".concat(e.name," has updated their number to ").concat(e.number),type:"normal"})})).catch((function(n){v({message:"Error: ".concat(e.name," entry could not be updated. ").concat(n.response.data),type:"error"})}))}})),!n){var r={name:O,number:N,date:new Date};f(r).then((function(e){u(t.concat(e)),v({message:"".concat(r.name," has been added"),type:"normal"}),S(""),j("")})).catch((function(e){v({message:"".concat(e.response.data),type:"error"})}))}}else window.alert("One or both of the fields are blank")},onChangeName:function(e){return j(e.target.value)},onChangeNumber:function(e){return S(e.target.value)},newName:O,newNumber:N}),c.a.createElement("h2",null,"Numbers"),c.a.createElement(g,{onClick:function(e){var n=e.target.getAttribute("person_id");window.confirm("Delete ".concat(t.find((function(e){return e.id===n})).name,"?"))&&p(n).then((function(e){var a=t.filter((function(e){return e.id!==n}));u(a)})).catch((function(e){v({message:"Error deleting person with ID: ".concat(n),type:"error"})}))},persons:t,filter:I}))});i.a.render(c.a.createElement(v,null),document.getElementById("root"));n.default=v}},[[15,1,2]]]);
//# sourceMappingURL=main.e76474f5.chunk.js.map